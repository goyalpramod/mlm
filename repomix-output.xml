This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: todo_checklist.md, ml_math_book_spec.md
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.eslintrc.json
.gitignore
app/globals.css
app/layout.tsx
app/linear-algebra/page.tsx
app/matrices/page.tsx
app/not-found.tsx
app/optimization/page.tsx
app/page.tsx
app/probability/page.tsx
app/statistics/page.tsx
components/content/MDXComponents.tsx
components/content/MDXContent.tsx
components/layout/ChapterLayout.tsx
components/layout/ChapterNavigation.tsx
components/layout/ClientLayout.tsx
components/layout/Footer.tsx
components/layout/Header.tsx
components/layout/Layout.tsx
components/providers/ThemeProvider.tsx
components/ui/Container.tsx
components/ui/ThemeToggle.tsx
content/linear-algebra/index.mdx
content/matrices/index.mdx
content/optimization/index.mdx
content/probability/index.mdx
content/statistics/index.mdx
lib/data/chapters.ts
lib/hooks/useTheme.ts
lib/utils/cn.ts
lib/utils/contentLoader.ts
lib/utils/loadMDX.ts
lib/utils/navigation.ts
lib/utils/typography.ts
LICENSE
mdx-components.tsx
next-env.d.ts
next.config.js
package.json
postcss.config.js
README.md
tailwind.config.ts
tsconfig.json
types/content.ts
types/frontmatter.ts
types/theme.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="components/content/MDXComponents.tsx">
import React from 'react'
import { cn } from '@/lib/utils/cn'

interface MDXComponentProps {
  className?: string
  children: React.ReactNode
}

// Custom heading components with anchor support
export function MDXHeading({ 
  level, 
  children, 
  className, 
  ...props 
}: MDXComponentProps & { level: 1 | 2 | 3 | 4 | 5 | 6 }) {
  const Component = `h${level}` as keyof JSX.IntrinsicElements
  
  const baseClasses = 'font-semibold text-foreground scroll-mt-16'
  const sizeClasses = {
    1: 'text-3xl sm:text-4xl lg:text-5xl mb-6 mt-0',
    2: 'text-2xl sm:text-3xl lg:text-4xl mb-4 mt-12 first:mt-0',
    3: 'text-xl sm:text-2xl lg:text-3xl mb-3 mt-8 first:mt-0',
    4: 'text-lg sm:text-xl mb-2 mt-6 first:mt-0',
    5: 'text-base sm:text-lg mb-2 mt-4 first:mt-0',
    6: 'text-sm sm:text-base mb-1 mt-4 first:mt-0'
  }
  
  return React.createElement(
    Component,
    {
      className: cn(baseClasses, sizeClasses[level], className),
      ...props
    },
    children
  )
}

// Mathematical content wrapper
export function MathContainer({ children, className, ...props }: MDXComponentProps) {
  return (
    <div 
      className={cn(
        'my-6 p-4 bg-muted rounded-lg border border-border overflow-x-auto',
        'text-center font-mono text-foreground',
        className
      )}
      {...props}
    >
      {children}
    </div>
  )
}

// Inline math wrapper
export function InlineMathWrapper({ children, className, ...props }: MDXComponentProps) {
  return (
    <span 
      className={cn(
        'font-mono bg-muted px-1 py-0.5 rounded text-foreground text-sm',
        className
      )}
      {...props}
    >
      {children}
    </span>
  )
}

// Enhanced code block
export function CodeBlock({ 
  children, 
  className, 
  language,
  ...props 
}: MDXComponentProps & { language?: string }) {
  return (
    <div className="my-6">
      {language && (
        <div className="text-xs text-muted-foreground mb-2 font-mono">
          {language}
        </div>
      )}
      <pre 
        className={cn(
          'p-4 bg-muted rounded-lg border border-border overflow-x-auto',
          'font-mono text-sm text-foreground',
          className
        )}
        {...props}
      >
        <code>{children}</code>
      </pre>
    </div>
  )
}

// Enhanced blockquote
export function BlockQuote({ children, className, ...props }: MDXComponentProps) {
  return (
    <blockquote 
      className={cn(
        'border-l-4 border-border pl-6 py-2 my-6',
        'italic text-muted-foreground bg-muted/30 rounded-r-lg',
        className
      )}
      {...props}
    >
      {children}
    </blockquote>
  )
}

// Callout box for important information
export function Callout({ 
  type = 'info', 
  children, 
  className, 
  title,
  ...props 
}: MDXComponentProps & { 
  type?: 'info' | 'warning' | 'error' | 'success'
  title?: string 
}) {
  const typeStyles = {
    info: 'border-blue-200 bg-blue-50 text-blue-900',
    warning: 'border-yellow-200 bg-yellow-50 text-yellow-900',
    error: 'border-red-200 bg-red-50 text-red-900',
    success: 'border-green-200 bg-green-50 text-green-900'
  }
  
  return (
    <div 
      className={cn(
        'my-6 p-4 border rounded-lg',
        typeStyles[type],
        className
      )}
      {...props}
    >
      {title && (
        <div className="font-semibold mb-2">{title}</div>
      )}
      {children}
    </div>
  )
}

// Definition list for mathematical terms
export function DefinitionList({ children, className, ...props }: MDXComponentProps) {
  return (
    <dl 
      className={cn(
        'my-6 space-y-4',
        className
      )}
      {...props}
    >
      {children}
    </dl>
  )
}

export function DefinitionTerm({ children, className, ...props }: MDXComponentProps) {
  return (
    <dt 
      className={cn(
        'font-semibold text-foreground',
        className
      )}
      {...props}
    >
      {children}
    </dt>
  )
}

export function DefinitionDescription({ children, className, ...props }: MDXComponentProps) {
  return (
    <dd 
      className={cn(
        'ml-4 text-muted-foreground',
        className
      )}
      {...props}
    >
      {children}
    </dd>
  )
}
</file>

<file path="components/content/MDXContent.tsx">
import React from 'react'
import { cn } from '@/lib/utils/cn'

interface MDXContentProps {
  children: React.ReactNode
  className?: string
}

export function MDXContent({ children, className }: MDXContentProps) {
  return (
    <div className={cn('mdx-content', className)}>
      <div className="prose prose-lg max-w-none">
        {children}
      </div>
    </div>
  )
}

// Error boundary for MDX content
interface MDXErrorBoundaryState {
  hasError: boolean
  error?: Error
}

export class MDXErrorBoundary extends React.Component<
  { children: React.ReactNode },
  MDXErrorBoundaryState
> {
  constructor(props: { children: React.ReactNode }) {
    super(props)
    this.state = { hasError: false }
  }

  static getDerivedStateFromError(error: Error): MDXErrorBoundaryState {
    return { hasError: true, error }
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    console.error('MDX Error:', error, errorInfo)
  }

  render() {
    if (this.state.hasError) {
      return (
        <div className="my-8 p-6 border border-red-200 bg-red-50 rounded-lg">
          <h3 className="text-lg font-semibold text-red-900 mb-2">
            Content Loading Error
          </h3>
          <p className="text-red-700 mb-4">
            There was an error loading this content. Please try refreshing the page.
          </p>
          {process.env.NODE_ENV === 'development' && this.state.error && (
            <details className="text-sm text-red-600">
              <summary className="font-medium cursor-pointer">
                Error Details (Development)
              </summary>
              <pre className="mt-2 p-2 bg-red-100 rounded text-xs overflow-x-auto">
                {this.state.error.message}
                {this.state.error.stack}
              </pre>
            </details>
          )}
        </div>
      )
    }

    return this.props.children
  }
}

// Wrapper that combines content and error boundary
export function SafeMDXContent({ children, className }: MDXContentProps) {
  return (
    <MDXErrorBoundary>
      <MDXContent className={className}>
        {children}
      </MDXContent>
    </MDXErrorBoundary>
  )
}
</file>

<file path="content/linear-algebra/index.mdx">
---
title: "Linear Algebra Fundamentals"
description: "Learn vectors, matrices, and linear transformations - the mathematical foundation of machine learning algorithms."
order: 1
estimatedTime: "45 minutes"
difficulty: "Beginner"
prerequisites: ["Basic algebra", "High school mathematics"]
learningObjectives:
  - "Understand vector spaces and operations"
  - "Master matrix multiplication and properties"
  - "Learn eigenvalues and eigenvectors"
  - "Apply linear transformations to data"
keywords: ["linear algebra", "vectors", "matrices", "eigenvalues", "machine learning"]
lastUpdated: "2025-01-07"
---

export const metadata = {
  title: frontmatter.title,
  description: frontmatter.description,
  keywords: frontmatter.keywords,
}

# Linear Algebra Fundamentals

Linear algebra forms the mathematical foundation of machine learning. At its core are vectors - mathematical objects that represent both magnitude and direction.

## Vectors and Vector Spaces

A vector is an ordered collection of numbers. In machine learning, we typically work with column vectors. For example, a 3-dimensional vector can be written as:

```
v = [v₁, v₂, v₃]ᵀ
```

Where `v₁`, `v₂`, and `v₃` are the components of the vector.

### Vector Operations

Several fundamental operations can be performed on vectors:

**Vector Addition:** When we add two vectors of the same dimension, we add their corresponding components:

```
a + b = [a₁ + b₁, a₂ + b₂, a₃ + b₃]ᵀ
```

**Scalar Multiplication:** Multiplying a vector by a scalar scales all components:

```
c · v = [c·v₁, c·v₂, c·v₃]ᵀ
```

**Dot Product:** The dot product of two vectors produces a scalar:

```
a · b = a₁b₁ + a₂b₂ + a₃b₃
```

## Matrix Operations

Matrices are rectangular arrays of numbers that can be thought of as collections of vectors. In machine learning, matrices represent datasets, transformations, and model parameters.

### Matrix Fundamentals

A matrix A with m rows and n columns is denoted as `A ∈ ℝᵐˣⁿ`. Each element is accessed using row and column indices: `A[i,j]` or `aᵢⱼ`.

### Matrix Multiplication

Matrix multiplication is fundamental to many machine learning algorithms. For matrices `A ∈ ℝᵐˣⁿ` and `B ∈ ℝⁿˣᵖ`, their product `C = AB` has dimensions `m × p`.

## Eigenvalues and Eigenvectors

Eigenvalues and eigenvectors reveal important properties of linear transformations and are essential for understanding dimensionality reduction techniques.

For a square matrix A, an eigenvector v and its corresponding eigenvalue λ satisfy:

```
Av = λv
```

This concept is crucial for Principal Component Analysis (PCA) and understanding data structure.

> **Note:** This is placeholder content. The actual mathematical content will be written separately with proper LaTeX rendering and interactive visualizations.
</file>

<file path="content/matrices/index.mdx">
---
title: "Advanced Matrix Theory"
description: "Deep dive into matrix decompositions, transformations, and their applications in machine learning algorithms."
order: 2
estimatedTime: "40 minutes"
difficulty: "Intermediate"
prerequisites: ["Linear Algebra basics", "Vector operations"]
learningObjectives:
  - "Master advanced matrix operations"
  - "Understand matrix decompositions (SVD, LU, QR)"
  - "Apply matrix techniques to dimensionality reduction"
  - "Solve systems of linear equations"
keywords: ["matrix theory", "SVD", "matrix decomposition", "PCA", "machine learning"]
lastUpdated: "2025-01-07"
---

export const metadata = {
  title: frontmatter.title,
  description: frontmatter.description,
  keywords: frontmatter.keywords,
}

# Advanced Matrix Theory

Building on basic linear algebra, this chapter explores advanced matrix operations and decompositions that are fundamental to machine learning algorithms.

## Matrix Decomposition

Matrix decomposition is the process of breaking down a matrix into simpler, more manageable components. These decompositions are fundamental to many machine learning algorithms.

### Singular Value Decomposition (SVD)

The Singular Value Decomposition is one of the most important matrix factorizations in machine learning. For any matrix `A ∈ ℝᵐˣⁿ`, SVD decomposes it as:

```
A = UΣVᵀ
```

Where:
- `U ∈ ℝᵐˣᵐ` is an orthogonal matrix (left singular vectors)
- `Σ ∈ ℝᵐˣⁿ` is a diagonal matrix of singular values
- `V ∈ ℝⁿˣⁿ` is an orthogonal matrix (right singular vectors)

SVD reveals the intrinsic dimensionality of data and is the mathematical foundation of Principal Component Analysis (PCA).

### LU Decomposition

LU decomposition factors a matrix into the product of a lower triangular matrix L and an upper triangular matrix U:

```
A = LU
```

This decomposition is particularly useful for solving systems of linear equations efficiently.

## Applications in Machine Learning

Matrix decompositions have direct applications in many machine learning techniques.

### Principal Component Analysis

PCA uses eigendecomposition or SVD to find the principal components of data - the directions of maximum variance.

For a data matrix X, PCA works with the covariance matrix:

```
C = (1/(n-1))XᵀX
```

### Linear Regression

Linear regression seeks to find the best-fitting line through data points. The normal equation solution uses matrix operations:

```
θ = (XᵀX)⁻¹Xᵀy
```

Where X is the feature matrix, y is the target vector, and θ are the model parameters.

> **Note:** This is placeholder content for demonstration. Full mathematical content with interactive visualizations will be added separately.
</file>

<file path="content/optimization/index.mdx">
---
title: "Optimization Theory"
description: "Mathematical optimization techniques including gradient descent and algorithms used to train machine learning models."
order: 5
estimatedTime: "55 minutes"
difficulty: "Advanced"
prerequisites: ["Calculus", "Linear algebra", "Vector operations"]
learningObjectives:
  - "Understand optimization fundamentals"
  - "Master gradient descent algorithms"
  - "Apply constrained optimization"
  - "Optimize machine learning models"
keywords: ["optimization", "gradient descent", "convex optimization", "machine learning", "algorithms"]
lastUpdated: "2025-01-07"
---

export const metadata = {
  title: frontmatter.title,
  description: frontmatter.description,
  keywords: frontmatter.keywords,
}

# Optimization Theory

Optimization is the mathematical discipline of finding the best solution from a set of available alternatives. In machine learning, optimization algorithms find model parameters that minimize a loss function.

## Optimization Fundamentals

An optimization problem seeks to minimize (or maximize) an **objective function** `f(x)` subject to constraints. In machine learning contexts:

- **Loss function:** Measures how well model predictions match actual data
- **Cost function:** Often includes regularization terms to prevent overfitting
- **Parameters:** `x` represents model weights and biases

### Common Loss Functions

**Mean Squared Error (Regression):**
```
L(θ) = (1/2m) Σᵢ (hθ(xⁱ) - yⁱ)²
```

**Cross-entropy Loss (Classification):**
```
L(θ) = -(1/m) Σᵢ [yⁱ log(hθ(xⁱ)) + (1-yⁱ) log(1-hθ(xⁱ))]
```

## Gradient Descent

Gradient descent is the most fundamental optimization algorithm in machine learning. It iteratively moves in the direction of steepest descent to find a function's minimum.

### Basic Gradient Descent

The gradient `∇f(x)` points in the direction of steepest increase. To minimize `f(x)`, we move in the opposite direction:

```
x_{t+1} = x_t - α∇f(x_t)
```

Where `α` is the **learning rate** that controls the step size.

### Stochastic Gradient Descent

**Batch Gradient Descent:** Uses entire dataset
```
θ_{t+1} = θ_t - α ∇_θ (1/m) Σᵢ L(hθ(xⁱ), yⁱ)
```

**Stochastic Gradient Descent:** Uses single example
```
θ_{t+1} = θ_t - α ∇_θ L(hθ(xⁱ), yⁱ)
```

**Mini-batch Gradient Descent:** Uses small batch of examples
```
θ_{t+1} = θ_t - α ∇_θ (1/|B|) Σᵢ∈B L(hθ(xⁱ), yⁱ)
```

## Advanced Optimizers

Modern optimization algorithms improve upon basic gradient descent:

**Momentum:** Accelerates gradients in consistent directions
```
v_t = βv_{t-1} + (1-β)∇f(x_t)
x_{t+1} = x_t - αv_t
```

**Adam:** Combines momentum and adaptive learning rates
```
m_t = β₁m_{t-1} + (1-β₁)∇f(x_t)
v_t = β₂v_{t-1} + (1-β₂)(∇f(x_t))²
x_{t+1} = x_t - α(m̂_t/√(v̂_t + ε))
```

## Constrained Optimization

Many optimization problems include constraints that limit the feasible solutions.

### Lagrange Multipliers

For problems with equality constraints, Lagrange multipliers convert constrained optimization into unconstrained optimization:

**Problem:** Minimize `f(x)` subject to `g(x) = 0`

**Lagrangian:**
```
L(x,λ) = f(x) + λg(x)
```

**Optimality Conditions:**
```
∇_x L(x,λ) = ∇f(x) + λ∇g(x) = 0
∇_λ L(x,λ) = g(x) = 0
```

> **Note:** This is placeholder content for demonstration. Full mathematical content with interactive visualizations will be added separately.
</file>

<file path="content/probability/index.mdx">
---
title: "Probability Theory"
description: "Learn probability fundamentals, random variables, and distributions essential for machine learning."
order: 3
estimatedTime: "50 minutes"
difficulty: "Beginner"
prerequisites: ["Basic calculus", "Set theory"]
learningObjectives:
  - "Understand probability fundamentals"
  - "Work with random variables and distributions"
  - "Apply Bayes' theorem"
  - "Model uncertainty in machine learning"
keywords: ["probability theory", "random variables", "distributions", "bayes theorem", "machine learning"]
lastUpdated: "2025-01-07"
---

export const metadata = {
  title: frontmatter.title,
  description: frontmatter.description,
  keywords: frontmatter.keywords,
}

# Probability Theory

Probability theory provides the mathematical framework for reasoning under uncertainty. In machine learning, we use probability to model uncertainty in data, make predictions, and quantify confidence in our results.

## Probability Fundamentals

A **sample space** Ω is the set of all possible outcomes of an experiment. An **event** is a subset of the sample space.

For example, when flipping a coin twice:
- Sample space: `Ω = {HH, HT, TH, TT}`
- Event "at least one head": `A = {HH, HT, TH}`

### Probability Rules

Probability assigns a number between 0 and 1 to each event. Key axioms include:

```
0 ≤ P(A) ≤ 1 for any event A
P(Ω) = 1 (certainty)
P(A ∪ B) = P(A) + P(B) - P(A ∩ B)
```

**Conditional Probability:** The probability of event A given that event B has occurred:

```
P(A|B) = P(A ∩ B) / P(B), provided P(B) > 0
```

## Probability Distributions

Probability distributions describe how probability is distributed over the possible values of a random variable.

### Discrete Distributions

**Bernoulli Distribution:** Models a single trial with success probability p:

```
P(X = k) = p^k × (1-p)^(1-k), k ∈ {0,1}
```

**Binomial Distribution:** Models the number of successes in n independent Bernoulli trials:

```
P(X = k) = C(n,k) × p^k × (1-p)^(n-k)
```

### Normal Distribution

The normal (Gaussian) distribution is the most important distribution in statistics and machine learning:

```
f(x) = (1/(σ√(2π))) × e^(-(x-μ)²/(2σ²))
```

## Bayes' Theorem

Bayes' theorem is fundamental to machine learning, providing a way to update our beliefs about hypotheses as we observe new evidence:

```
P(H|E) = P(E|H) × P(H) / P(E)
```

Where:
- `P(H|E)` is the posterior probability (updated belief)
- `P(E|H)` is the likelihood (how well hypothesis explains evidence)
- `P(H)` is the prior probability (initial belief)
- `P(E)` is the evidence (normalizing constant)

> **Note:** This is placeholder content for demonstration. Full mathematical content with interactive visualizations will be added separately.
</file>

<file path="content/statistics/index.mdx">
---
title: "Statistics for Machine Learning"
description: "Statistical methods, hypothesis testing, and inference techniques used in machine learning."
order: 4
estimatedTime: "35 minutes"
difficulty: "Intermediate"
prerequisites: ["Probability theory", "Basic calculus"]
learningObjectives:
  - "Perform statistical inference"
  - "Understand hypothesis testing"
  - "Apply statistical methods to data"
  - "Evaluate model performance statistically"
keywords: ["statistics", "hypothesis testing", "confidence intervals", "regression analysis", "machine learning"]
lastUpdated: "2025-01-07"
---

export const metadata = {
  title: frontmatter.title,
  description: frontmatter.description,
  keywords: frontmatter.keywords,
}

# Statistics for Machine Learning

Statistical methods provide the tools for making inferences about populations from samples, hypothesis testing, and evaluating the performance of machine learning models.

## Descriptive Statistics

Descriptive statistics summarize and describe the main features of a dataset.

**Measures of Central Tendency:**
- **Mean:** `μ = (1/n) Σᵢ xᵢ` - the average value
- **Median:** The middle value when data is ordered
- **Mode:** The most frequently occurring value

**Measures of Spread:**
- **Variance:** `σ² = (1/n) Σᵢ (xᵢ - μ)²`
- **Standard Deviation:** `σ = √(σ²)`
- **Range:** Maximum - Minimum

## Statistical Inference

Statistical inference allows us to make conclusions about a population based on a sample.

### Confidence Intervals

A confidence interval provides a range of plausible values for a population parameter. For a sample mean with known population standard deviation:

```
CI = x̄ ± z(α/2) × (σ/√n)
```

### Hypothesis Testing

Hypothesis testing is a statistical method for making decisions about population parameters based on sample data.

**The Process:**
1. State null hypothesis H₀ and alternative hypothesis H₁
2. Choose significance level α (typically 0.05)
3. Calculate test statistic
4. Determine p-value or compare with critical value
5. Make decision: reject or fail to reject H₀

**One-sample t-test:** Tests whether a sample mean differs from a hypothesized value:

```
t = (x̄ - μ₀) / (s/√n)
```

## Regression Analysis

Regression analysis is used to model the relationship between a dependent variable and one or more independent variables.

### Linear Regression

Linear regression models the relationship between variables using a linear equation:

```
y = β₀ + β₁x + ε
```

Where:
- `y` is the dependent variable
- `x` is the independent variable
- `β₀` is the y-intercept
- `β₁` is the slope
- `ε` is the error term

> **Note:** This is placeholder content for demonstration. Full mathematical content with interactive visualizations will be added separately.
</file>

<file path="lib/utils/contentLoader.ts">
import { ChapterFrontmatter, ContentMetadata } from '@/types/frontmatter'

/**
 * Parse reading time from estimated time string
 */
export function parseReadingTime(estimatedTime: string): number {
  const match = estimatedTime.match(/(\d+)/)
  return match ? parseInt(match[1], 10) : 0
}

/**
 * Convert frontmatter to content metadata
 */
export function frontmatterToMetadata(frontmatter: ChapterFrontmatter): ContentMetadata {
  return {
    title: frontmatter.title,
    description: frontmatter.description,
    slug: frontmatter.slug || '',
    order: frontmatter.order,
    estimatedTime: frontmatter.estimatedTime,
    difficulty: frontmatter.difficulty,
    prerequisites: frontmatter.prerequisites,
    learningObjectives: frontmatter.learningObjectives,
    lastUpdated: frontmatter.lastUpdated
  }
}

/**
 * Validate required frontmatter fields
 */
export function validateFrontmatter(frontmatter: Partial<ChapterFrontmatter>): ChapterFrontmatter {
  const required = ['title', 'description', 'order', 'estimatedTime', 'difficulty', 'prerequisites', 'learningObjectives']
  
  for (const field of required) {
    if (!(field in frontmatter) || frontmatter[field as keyof ChapterFrontmatter] === undefined) {
      throw new Error(`Missing required frontmatter field: ${field}`)
    }
  }
  
  return frontmatter as ChapterFrontmatter
}

/**
 * Calculate word count from content string
 */
export function calculateWordCount(content: string): number {
  return content
    .replace(/[^\w\s]/g, '')
    .split(/\s+/)
    .filter(word => word.length > 0)
    .length
}

/**
 * Estimate reading time based on word count
 */
export function estimateReadingTime(wordCount: number, wordsPerMinute: number = 200): number {
  return Math.ceil(wordCount / wordsPerMinute)
}

/**
 * Generate excerpt from content
 */
export function generateExcerpt(content: string, maxLength: number = 160): string {
  const plainText = content
    .replace(/[#*`]/g, '') // Remove markdown formatting
    .replace(/\n/g, ' ')   // Replace newlines with spaces
    .trim()
  
  if (plainText.length <= maxLength) {
    return plainText
  }
  
  return plainText.slice(0, maxLength).replace(/\s+\S*$/, '') + '...'
}

/**
 * Slugify text for URLs
 */
export function slugify(text: string): string {
  return text
    .toLowerCase()
    .replace(/[^\w\s-]/g, '')
    .replace(/\s+/g, '-')
    .replace(/--+/g, '-')
    .trim()
}

/**
 * Format date for display
 */
export function formatDate(dateString: string): string {
  try {
    const date = new Date(dateString)
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    })
  } catch {
    return dateString
  }
}

/**
 * Error handling for content loading
 */
export class ContentLoadError extends Error {
  constructor(
    message: string,
    public readonly contentPath: string,
    public readonly originalError?: Error
  ) {
    super(message)
    this.name = 'ContentLoadError'
  }
}

/**
 * Safe content loader with error handling
 */
export async function safeLoadContent<T>(
  loader: () => Promise<T>,
  contentPath: string
): Promise<T> {
  try {
    return await loader()
  } catch (error) {
    throw new ContentLoadError(
      `Failed to load content from ${contentPath}`,
      contentPath,
      error instanceof Error ? error : new Error(String(error))
    )
  }
}
</file>

<file path="lib/utils/loadMDX.ts">
import { ChapterFrontmatter, MDXMetadata } from '@/types/frontmatter'
import { ContentLoadError, safeLoadContent } from './contentLoader'

/**
 * Dynamically import MDX content
 */
export async function loadMDXContent(chapterSlug: string): Promise<MDXMetadata> {
  return safeLoadContent(async () => {
    let content: any
    let frontmatter: ChapterFrontmatter
    
    try {
      // Dynamic import based on chapter slug
      switch (chapterSlug) {
        case 'linear-algebra':
          content = await import('@/content/linear-algebra/index.mdx')
          break
        case 'matrices':
          content = await import('@/content/matrices/index.mdx')
          break
        case 'probability':
          content = await import('@/content/probability/index.mdx')
          break
        case 'statistics':
          content = await import('@/content/statistics/index.mdx')
          break
        case 'optimization':
          content = await import('@/content/optimization/index.mdx')
          break
        default:
          throw new Error(`Unknown chapter: ${chapterSlug}`)
      }

      // Extract frontmatter from the MDX module
      frontmatter = content.frontmatter || {}
      
      // Validate required frontmatter fields
      if (!frontmatter.title || !frontmatter.description) {
        throw new Error('Missing required frontmatter fields: title and description')
      }

      return {
        frontmatter,
        content: content.default,
      }
    } catch (error) {
      throw new Error(`Failed to load MDX content for ${chapterSlug}: ${error}`)
    }
  }, `content/${chapterSlug}/index.mdx`)
}

/**
 * Get all available chapter slugs
 */
export function getAvailableChapters(): string[] {
  return [
    'linear-algebra',
    'matrices', 
    'probability',
    'statistics',
    'optimization'
  ]
}

/**
 * Check if chapter exists
 */
export function isValidChapter(slug: string): boolean {
  return getAvailableChapters().includes(slug)
}

/**
 * Get chapter order for navigation
 */
export function getChapterOrder(slug: string): number {
  const order = {
    'linear-algebra': 1,
    'matrices': 2,
    'probability': 3,
    'statistics': 4,
    'optimization': 5
  }
  return order[slug as keyof typeof order] || 0
}

/**
 * Get next chapter slug
 */
export function getNextChapter(currentSlug: string): string | null {
  const chapters = getAvailableChapters()
  const currentIndex = chapters.indexOf(currentSlug)
  
  if (currentIndex === -1 || currentIndex === chapters.length - 1) {
    return null
  }
  
  return chapters[currentIndex + 1]
}

/**
 * Get previous chapter slug
 */
export function getPreviousChapter(currentSlug: string): string | null {
  const chapters = getAvailableChapters()
  const currentIndex = chapters.indexOf(currentSlug)
  
  if (currentIndex <= 0) {
    return null
  }
  
  return chapters[currentIndex - 1]
}
</file>

<file path="mdx-components.tsx">
import type { MDXComponents } from 'mdx/types'
import { H1, H2, H3, H4, H5, H6, P, MathBlock, InlineMath } from '@/lib/utils/typography'
import Link from 'next/link'
import Image from 'next/image'

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    // Headings with proper hierarchy and styling
    h1: ({ children, ...props }) => <H1 {...props}>{children}</H1>,
    h2: ({ children, ...props }) => <H2 {...props}>{children}</H2>,
    h3: ({ children, ...props }) => <H3 {...props}>{children}</H3>,
    h4: ({ children, ...props }) => <H4 {...props}>{children}</H4>,
    h5: ({ children, ...props }) => <H5 {...props}>{children}</H5>,
    h6: ({ children, ...props }) => <H6 {...props}>{children}</H6>,
    
    // Paragraphs with proper typography
    p: ({ children, ...props }) => <P {...props}>{children}</P>,
    
    // Links with Next.js optimization
    a: ({ href, children, ...props }) => {
      if (href?.startsWith('/')) {
        return (
          <Link href={href} {...props}>
            {children}
          </Link>
        )
      }
      return (
        <a 
          href={href} 
          target={href?.startsWith('http') ? '_blank' : undefined}
          rel={href?.startsWith('http') ? 'noopener noreferrer' : undefined}
          {...props}
        >
          {children}
        </a>
      )
    },
    
    // Images with Next.js optimization
    img: ({ src, alt, ...props }) => (
      <Image
        src={src || ''}
        alt={alt || ''}
        width={800}
        height={400}
        className="rounded-lg border border-border my-6"
        {...props}
      />
    ),
    
    // Lists with proper styling
    ul: ({ children, ...props }) => (
      <ul className="list-disc pl-6 mb-4 space-y-1" {...props}>
        {children}
      </ul>
    ),
    ol: ({ children, ...props }) => (
      <ol className="list-decimal pl-6 mb-4 space-y-1" {...props}>
        {children}
      </ol>
    ),
    li: ({ children, ...props }) => (
      <li className="text-foreground leading-relaxed" {...props}>
        {children}
      </li>
    ),
    
    // Code blocks and inline code
    code: ({ children, className, ...props }) => {
      const isInline = !className
      if (isInline) {
        return <InlineMath {...props}>{children}</InlineMath>
      }
      return (
        <code 
          className="block p-4 bg-muted rounded-lg border border-border overflow-x-auto font-mono text-sm"
          {...props}
        >
          {children}
        </code>
      )
    },
    
    pre: ({ children, ...props }) => (
      <MathBlock {...props}>
        {children}
      </MathBlock>
    ),
    
    // Blockquotes
    blockquote: ({ children, ...props }) => (
      <blockquote 
        className="border-l-4 border-border pl-4 italic text-muted-foreground my-6"
        {...props}
      >
        {children}
      </blockquote>
    ),
    
    // Tables
    table: ({ children, ...props }) => (
      <div className="overflow-x-auto my-6">
        <table 
          className="w-full border-collapse border border-border"
          {...props}
        >
          {children}
        </table>
      </div>
    ),
    th: ({ children, ...props }) => (
      <th 
        className="border border-border px-4 py-2 bg-muted font-semibold text-left"
        {...props}
      >
        {children}
      </th>
    ),
    td: ({ children, ...props }) => (
      <td 
        className="border border-border px-4 py-2"
        {...props}
      >
        {children}
      </td>
    ),
    
    // Horizontal rule
    hr: (props) => (
      <hr className="border-0 border-t border-border my-8" {...props} />
    ),
    
    // Allow component overrides
    ...components,
  }
}
</file>

<file path="types/frontmatter.ts">
export interface ChapterFrontmatter {
  title: string
  description: string
  order: number
  estimatedTime: string
  difficulty: 'Beginner' | 'Intermediate' | 'Advanced'
  prerequisites: string[]
  learningObjectives: string[]
  keywords?: string[]
  lastUpdated?: string
  author?: string
  slug?: string
}

export interface SectionFrontmatter {
  title: string
  order: number
  estimatedTime?: string
  description?: string
}

export interface MDXMetadata {
  frontmatter: ChapterFrontmatter
  content: React.ComponentType
  readingTime?: number
  wordCount?: number
}

export interface ContentMetadata {
  title: string
  description: string
  slug: string
  order: number
  estimatedTime: string
  difficulty: string
  prerequisites: string[]
  learningObjectives: string[]
  lastUpdated?: string
}
</file>

<file path=".eslintrc.json">
{
  "extends": [
    "next/core-web-vitals",
    "next/typescript"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "warn",
    "prefer-const": "error",
    "react-hooks/exhaustive-deps": "warn"
  }
}
</file>

<file path="app/linear-algebra/page.tsx">
import type { Metadata } from 'next'
import { ChapterLayout } from '@/components/layout/ChapterLayout'
import { getChapterBySlug } from '@/lib/data/chapters'
import { getChapterNavigation } from '@/lib/utils/navigation'
import { notFound } from 'next/navigation'
import { SafeMDXContent } from '@/components/content/MDXContent'
import LinearAlgebraContent from '@/content/linear-algebra/index.mdx'

export const metadata: Metadata = {
  title: 'Linear Algebra | Interactive ML Mathematics',
  description: 'Learn vectors, matrices, and linear transformations - the mathematical foundation of machine learning algorithms.',
  keywords: ['linear algebra', 'vectors', 'matrices', 'eigenvalues', 'machine learning', 'mathematics'],
}

export default function LinearAlgebraPage() {
  const chapter = getChapterBySlug('linear-algebra')
  
  if (!chapter) {
    notFound()
  }
  
  const navigation = getChapterNavigation('linear-algebra')
  
  return (
    <ChapterLayout
      chapter={chapter}
      previousChapter={navigation?.previous}
      nextChapter={navigation?.next}
    >
      <SafeMDXContent>
        <LinearAlgebraContent />
      </SafeMDXContent>
    </ChapterLayout>
  )
}
</file>

<file path="app/matrices/page.tsx">
import type { Metadata } from 'next'
import { ChapterLayout } from '@/components/layout/ChapterLayout'
import { getChapterBySlug } from '@/lib/data/chapters'
import { getChapterNavigation } from '@/lib/utils/navigation'
import { notFound } from 'next/navigation'
import { SafeMDXContent } from '@/components/content/MDXContent'
import MatricesContent from '@/content/matrices/index.mdx'

export const metadata: Metadata = {
  title: 'Advanced Matrix Theory | Interactive ML Mathematics',
  description: 'Deep dive into matrix decompositions, transformations, and their applications in machine learning algorithms.',
  keywords: ['matrix theory', 'SVD', 'matrix decomposition', 'PCA', 'machine learning', 'linear algebra'],
}

export default function MatricesPage() {
  const chapter = getChapterBySlug('matrices')
  
  if (!chapter) {
    notFound()
  }
  
  const navigation = getChapterNavigation('matrices')
  
  return (
    <ChapterLayout
      chapter={chapter}
      previousChapter={navigation?.previous}
      nextChapter={navigation?.next}
    >
      <SafeMDXContent>
        <MatricesContent />
      </SafeMDXContent>
    </ChapterLayout>
  )
}
</file>

<file path="app/not-found.tsx">
import Link from 'next/link'

export default function NotFound() {
  return (
    <div className="container mx-auto px-4 py-16">
      <div className="max-w-2xl mx-auto text-center">
        <h1 className="text-6xl font-bold mb-4">404</h1>
        <h2 className="text-2xl font-semibold mb-6">Page Not Found</h2>
        <p className="text-muted-foreground mb-8">
          The mathematical concept you're looking for doesn't exist in our current dimension.
        </p>
        <Link 
          href="/" 
          className="inline-flex items-center px-6 py-3 bg-foreground text-background rounded-lg hover:opacity-90 transition-opacity"
        >
          Return Home
        </Link>
      </div>
    </div>
  )
}
</file>

<file path="app/optimization/page.tsx">
import type { Metadata } from 'next'
import { ChapterLayout } from '@/components/layout/ChapterLayout'
import { getChapterBySlug } from '@/lib/data/chapters'
import { getChapterNavigation } from '@/lib/utils/navigation'
import { notFound } from 'next/navigation'
import { SafeMDXContent } from '@/components/content/MDXContent'
import OptimizationContent from '@/content/optimization/index.mdx'

export const metadata = {
  title: 'Optimization Theory | Interactive ML Mathematics',
  description: 'Mathematical optimization techniques including gradient descent and algorithms used to train machine learning models.',
  keywords: ['optimization', 'gradient descent', 'convex optimization', 'machine learning', 'algorithms'],
}

export default function OptimizationPage() {
  const chapter = getChapterBySlug('optimization')
  
  if (!chapter) {
    notFound()
  }
  
  const navigation = getChapterNavigation('optimization')
  
  return (
    <ChapterLayout
      chapter={chapter}
      previousChapter={navigation?.previous}
      nextChapter={navigation?.next}
    >
      <SafeMDXContent>
        <OptimizationContent />
      </SafeMDXContent>
    </ChapterLayout>
  )
}
</file>

<file path="app/probability/page.tsx">
import type { Metadata } from 'next'
import { ChapterLayout } from '@/components/layout/ChapterLayout'
import { getChapterBySlug } from '@/lib/data/chapters'
import { getChapterNavigation } from '@/lib/utils/navigation'
import { notFound } from 'next/navigation'
import { SafeMDXContent } from '@/components/content/MDXContent'
import ProbabilityContent from '@/content/probability/index.mdx'

export const metadata: Metadata = {
  title: 'Probability Theory | Interactive ML Mathematics',
  description: 'Learn probability fundamentals, random variables, and distributions essential for machine learning.',
  keywords: ['probability theory', 'random variables', 'distributions', 'bayes theorem', 'machine learning'],
}

export default function ProbabilityPage() {
  const chapter = getChapterBySlug('probability')
  
  if (!chapter) {
    notFound()
  }
  
  const navigation = getChapterNavigation('probability')
  
  return (
    <ChapterLayout
      chapter={chapter}
      previousChapter={navigation?.previous}
      nextChapter={navigation?.next}
    >
      <SafeMDXContent>
        <ProbabilityContent />
      </SafeMDXContent>
    </ChapterLayout>
  )
}
</file>

<file path="app/statistics/page.tsx">
import type { Metadata } from 'next'
import { ChapterLayout } from '@/components/layout/ChapterLayout'
import { getChapterBySlug } from '@/lib/data/chapters'
import { getChapterNavigation } from '@/lib/utils/navigation'
import { notFound } from 'next/navigation'
import { SafeMDXContent } from '@/components/content/MDXContent'
import StatisticsContent from '@/content/statistics/index.mdx'

export const metadata: Metadata = {
  title: 'Statistics for ML | Interactive ML Mathematics',
  description: 'Statistical methods, hypothesis testing, and inference techniques used in machine learning.',
  keywords: ['statistics', 'hypothesis testing', 'confidence intervals', 'regression analysis', 'machine learning'],
}

export default function StatisticsPage() {
  const chapter = getChapterBySlug('statistics')
  
  if (!chapter) {
    notFound()
  }
  
  const navigation = getChapterNavigation('statistics')
  
  return (
    <ChapterLayout
      chapter={chapter}
      previousChapter={navigation?.previous}
      nextChapter={navigation?.next}
    >
      <SafeMDXContent>
        <StatisticsContent />
      </SafeMDXContent>
    </ChapterLayout>
  )
}
</file>

<file path="components/layout/ChapterLayout.tsx">
import { Chapter } from '@/types/content'
import { Container } from '@/components/ui/Container'
import { ChapterNavigation } from './ChapterNavigation'
import { H1, P, Small } from '@/lib/utils/typography'
import { getDifficultyColor, formatReadingTime } from '@/lib/utils/navigation'
import { cn } from '@/lib/utils/cn'

interface ChapterLayoutProps {
  chapter: Chapter
  children: React.ReactNode
  previousChapter?: Chapter
  nextChapter?: Chapter
}

export function ChapterLayout({
  chapter,
  children,
  previousChapter,
  nextChapter
}: ChapterLayoutProps) {
  return (
    <div className="min-h-screen bg-background">
      {/* Chapter Header */}
      <section className="py-12 border-b border-border bg-muted/30">
        <Container size="normal">
          <div className="max-w-3xl">
            {/* Chapter metadata */}
            <div className="flex flex-wrap items-center gap-4 mb-6">
              <span className="text-2xl">{chapter.icon}</span>
              <div className="flex flex-wrap items-center gap-3 text-sm">
                <span className={cn(
                  'px-2 py-1 rounded-full border text-xs font-medium',
                  getDifficultyColor(chapter.difficulty)
                )}>
                  {chapter.difficulty}
                </span>
                <span className="text-muted-foreground">
                  {formatReadingTime(chapter.readingTime)}
                </span>
                <span className="text-muted-foreground">
                  Chapter {chapter.order}
                </span>
              </div>
            </div>

            {/* Chapter title and description */}
            <H1 className="mb-4">{chapter.title}</H1>
            <P className="text-xl text-muted-foreground leading-relaxed">
              {chapter.description}
            </P>

            {/* Prerequisites */}
            {chapter.prerequisites.length > 0 && (
              <div className="mt-6 p-4 bg-background rounded-lg border border-border">
                <h3 className="font-semibold text-foreground mb-2">Prerequisites</h3>
                <div className="flex flex-wrap gap-2">
                  {chapter.prerequisites.map((prerequisite, index) => (
                    <span
                      key={index}
                      className="text-xs px-2 py-1 bg-muted text-muted-foreground rounded-full"
                    >
                      {prerequisite}
                    </span>
                  ))}
                </div>
              </div>
            )}

            {/* Learning objectives */}
            {chapter.learningObjectives.length > 0 && (
              <div className="mt-4 p-4 bg-background rounded-lg border border-border">
                <h3 className="font-semibold text-foreground mb-2">What You'll Learn</h3>
                <ul className="space-y-1">
                  {chapter.learningObjectives.map((objective, index) => (
                    <li key={index} className="text-sm text-muted-foreground flex items-start">
                      <span className="text-foreground mr-2">•</span>
                      {objective}
                    </li>
                  ))}
                </ul>
              </div>
            )}
          </div>
        </Container>
      </section>

      {/* Chapter Content */}
      <main className="py-16">
        <Container size="normal">
          <div className="max-w-3xl">
            {children}
          </div>
        </Container>
      </main>

      {/* Chapter Navigation */}
      <ChapterNavigation
        previousChapter={previousChapter}
        nextChapter={nextChapter}
      />
    </div>
  )
}
</file>

<file path="components/layout/ChapterNavigation.tsx">
import Link from 'next/link'
import { Chapter } from '@/types/content'
import { Container } from '@/components/ui/Container'

interface ChapterNavigationProps {
  previousChapter?: Chapter
  nextChapter?: Chapter
}

export function ChapterNavigation({
  previousChapter,
  nextChapter
}: ChapterNavigationProps) {
  if (!previousChapter && !nextChapter) {
    return null
  }

  return (
    <nav className="border-t border-border bg-muted/30" aria-label="Chapter navigation">
      <Container size="normal">
        <div className="py-8">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {/* Previous Chapter */}
            <div className="flex justify-start">
              {previousChapter ? (
                <Link
                  href={`/${previousChapter.slug}`}
                  className="group flex items-center space-x-4 p-4 rounded-lg border border-border bg-background hover:bg-accent transition-colors max-w-sm"
                >
                  <div className="flex-shrink-0">
                    <svg
                      className="w-6 h-6 text-muted-foreground group-hover:text-foreground transition-colors"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth={2}
                        d="M15 19l-7-7 7-7"
                      />
                    </svg>
                  </div>
                  <div className="min-w-0">
                    <p className="text-sm text-muted-foreground mb-1">Previous</p>
                    <p className="font-semibold text-foreground group-hover:text-foreground truncate">
                      {previousChapter.title}
                    </p>
                    <p className="text-xs text-muted-foreground mt-1">
                      Chapter {previousChapter.order}
                    </p>
                  </div>
                </Link>
              ) : (
                <div /> // Empty div to maintain grid layout
              )}
            </div>

            {/* Next Chapter */}
            <div className="flex justify-end">
              {nextChapter ? (
                <Link
                  href={`/${nextChapter.slug}`}
                  className="group flex items-center space-x-4 p-4 rounded-lg border border-border bg-background hover:bg-accent transition-colors max-w-sm"
                >
                  <div className="min-w-0 text-right">
                    <p className="text-sm text-muted-foreground mb-1">Next</p>
                    <p className="font-semibold text-foreground group-hover:text-foreground truncate">
                      {nextChapter.title}
                    </p>
                    <p className="text-xs text-muted-foreground mt-1">
                      Chapter {nextChapter.order}
                    </p>
                  </div>
                  <div className="flex-shrink-0">
                    <svg
                      className="w-6 h-6 text-muted-foreground group-hover:text-foreground transition-colors"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth={2}
                        d="M9 5l7 7-7 7"
                      />
                    </svg>
                  </div>
                </Link>
              ) : (
                <div /> // Empty div to maintain grid layout
              )}
            </div>
          </div>

          {/* Back to overview */}
          <div className="flex justify-center mt-8">
            <Link
              href="/"
              className="flex items-center space-x-2 text-sm text-muted-foreground hover:text-foreground transition-colors"
            >
              <svg
                className="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth={2}
                  d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"
                />
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth={2}
                  d="M8 5v14l11-7z"
                />
              </svg>
              <span>Back to Book Overview</span>
            </Link>
          </div>
        </div>
      </Container>
    </nav>
  )
}
</file>

<file path="components/layout/Footer.tsx">
import Link from 'next/link'

export function Footer() {
  return (
    <footer className="border-t border-border bg-background">
      <div className="container mx-auto max-w-7xl px-4 py-8">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
          {/* Main Info */}
          <div className="md:col-span-2">
            <div className="flex items-center space-x-2 mb-4">
              <div className="h-6 w-6 rounded bg-foreground flex items-center justify-center">
                <span className="text-background font-bold text-sm">∑</span>
              </div>
              <span className="font-semibold text-foreground">ML Mathematics</span>
            </div>
            <p className="text-sm text-muted-foreground leading-relaxed max-w-md">
              An interactive web book for mathematics in machine learning. 
              Learn through visualizations and hands-on exercises.
            </p>
          </div>

          {/* Quick Links */}
          <div>
            <h3 className="font-semibold text-foreground mb-4">Chapters</h3>
            <ul className="space-y-2">
              <li>
                <Link 
                  href="/linear-algebra" 
                  className="text-sm text-muted-foreground hover:text-foreground transition-colors"
                >
                  Linear Algebra
                </Link>
              </li>
              <li>
                <Link 
                  href="/probability" 
                  className="text-sm text-muted-foreground hover:text-foreground transition-colors"
                >
                  Probability
                </Link>
              </li>
              <li>
                <Link 
                  href="/optimization" 
                  className="text-sm text-muted-foreground hover:text-foreground transition-colors"
                >
                  Optimization
                </Link>
              </li>
            </ul>
          </div>

          {/* Resources */}
          <div>
            <h3 className="font-semibold text-foreground mb-4">Resources</h3>
            <ul className="space-y-2">
              <li>
                <Link 
                  href="/about" 
                  className="text-sm text-muted-foreground hover:text-foreground transition-colors"
                >
                  About
                </Link>
              </li>
              <li>
                <a 
                  href="https://github.com" 
                  target="_blank" 
                  rel="noopener noreferrer"
                  className="text-sm text-muted-foreground hover:text-foreground transition-colors"
                >
                  GitHub
                </a>
              </li>
              <li>
                <Link 
                  href="/contributing" 
                  className="text-sm text-muted-foreground hover:text-foreground transition-colors"
                >
                  Contributing
                </Link>
              </li>
            </ul>
          </div>
        </div>

        {/* Bottom Bar */}
        <div className="mt-8 pt-8 border-t border-border flex flex-col sm:flex-row justify-between items-center">
          <p className="text-xs text-muted-foreground">
            © 2025 ML Mathematics. Built with Next.js and TypeScript.
          </p>
          <div className="flex items-center space-x-4 mt-4 sm:mt-0">
            <Link 
              href="/privacy" 
              className="text-xs text-muted-foreground hover:text-foreground transition-colors"
            >
              Privacy
            </Link>
            <Link 
              href="/terms" 
              className="text-xs text-muted-foreground hover:text-foreground transition-colors"
            >
              Terms
            </Link>
          </div>
        </div>
      </div>
    </footer>
  )
}
</file>

<file path="components/layout/Header.tsx">
'use client'

import { ThemeToggle } from '@/components/ui/ThemeToggle'
import Link from 'next/link'

export function Header() {
  return (
    <header className="sticky top-0 z-40 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <div className="container flex h-16 items-center justify-between px-4 mx-auto max-w-7xl">
        {/* Logo/Title Area */}
        <div className="flex items-center space-x-2">
          <Link 
            href="/" 
            className="flex items-center space-x-2 hover:opacity-80 transition-opacity"
          >
            <div className="h-8 w-8 rounded-lg bg-foreground flex items-center justify-center">
              <span className="text-background font-bold text-lg">∑</span>
            </div>
            <div className="hidden sm:block">
              <h1 className="text-xl font-semibold text-foreground">
                ML Mathematics
              </h1>
              <p className="text-xs text-muted-foreground -mt-1">
                Interactive Learning
              </p>
            </div>
          </Link>
        </div>

        {/* Navigation Area - Placeholder for future navigation */}
        <nav className="hidden md:flex items-center space-x-6" role="navigation">
          <Link 
            href="/linear-algebra" 
            className="text-sm text-muted-foreground hover:text-foreground transition-colors"
          >
            Linear Algebra
          </Link>
          <Link 
            href="/probability" 
            className="text-sm text-muted-foreground hover:text-foreground transition-colors"
          >
            Probability
          </Link>
          <Link 
            href="/optimization" 
            className="text-sm text-muted-foreground hover:text-foreground transition-colors"
          >
            Optimization
          </Link>
        </nav>

        {/* Right Side Actions */}
        <div className="flex items-center space-x-4">
          {/* Mobile Menu Button - Placeholder for future mobile nav */}
          <button
            className="md:hidden p-2 rounded-lg hover:bg-accent transition-colors"
            aria-label="Open navigation menu"
            type="button"
          >
            <svg
              className="h-5 w-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={2}
                d="M4 6h16M4 12h16M4 18h16"
              />
            </svg>
          </button>

          {/* Theme Toggle */}
          <ThemeToggle />
        </div>
      </div>
    </header>
  )
}
</file>

<file path="components/layout/Layout.tsx">
import { Header } from './Header'
import { Footer } from './Footer'

interface LayoutProps {
  children: React.ReactNode
}

export function Layout({ children }: LayoutProps) {
  return (
    <div className="min-h-screen flex flex-col bg-background text-foreground">
      <Header />
      
      <main className="flex-1 w-full">
        {children}
      </main>
      
      <Footer />
    </div>
  )
}
</file>

<file path="components/providers/ThemeProvider.tsx">
'use client'

import { createContext, useContext, useEffect, useState } from 'react'

type Theme = 'light' | 'dark'

interface ThemeContextValue {
  theme: Theme
  toggleTheme: () => void
}

const ThemeContext = createContext<ThemeContextValue | undefined>(undefined)

interface ThemeProviderProps {
  children: React.ReactNode
}

export function ThemeProvider({ children }: ThemeProviderProps) {
  const [theme, setTheme] = useState<Theme>('light')
  const [mounted, setMounted] = useState(false)

  useEffect(() => {
    // Get theme from localStorage or system preference
    const getInitialTheme = (): Theme => {
      if (typeof window === 'undefined') return 'light'
      
      const stored = localStorage.getItem('theme')
      if (stored === 'light' || stored === 'dark') {
        return stored
      }
      
      // Check system preference
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
    }

    const initialTheme = getInitialTheme()
    setTheme(initialTheme)
    setMounted(true)

    // Apply theme to document
    const root = document.documentElement
    root.classList.remove('light', 'dark')
    root.classList.add(initialTheme)
  }, [])

  useEffect(() => {
    if (!mounted) return

    // Update localStorage and DOM when theme changes
    localStorage.setItem('theme', theme)
    const root = document.documentElement
    root.classList.remove('light', 'dark')
    root.classList.add(theme)
  }, [theme, mounted])

  const toggleTheme = () => {
    setTheme(prev => prev === 'light' ? 'dark' : 'light')
  }

  // Prevent hydration mismatch by not rendering until mounted
  if (!mounted) {
    return (
      <div className="min-h-screen bg-white">
        {children}
      </div>
    )
  }

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  )
}

export function useTheme() {
  const context = useContext(ThemeContext)
  if (!context) {
    throw new Error('useTheme must be used within a ThemeProvider')
  }
  return context
}
</file>

<file path="components/ui/Container.tsx">
import { cn } from '@/lib/utils/cn'

interface ContainerProps {
  children: React.ReactNode
  size?: 'narrow' | 'normal' | 'wide' | 'full'
  className?: string
}

export function Container({ 
  children, 
  size = 'normal', 
  className 
}: ContainerProps) {
  const sizeClasses = {
    narrow: 'max-w-2xl',      // ~672px - for focused reading
    normal: 'max-w-4xl',      // ~896px - for general content
    wide: 'max-w-6xl',        // ~1152px - for visualizations
    full: 'max-w-7xl'         // ~1280px - for full-width layouts
  }

  return (
    <div 
      className={cn(
        'mx-auto px-4 sm:px-6 lg:px-8',
        sizeClasses[size],
        className
      )}
    >
      {children}
    </div>
  )
}
</file>

<file path="lib/data/chapters.ts">
import { Chapter } from '@/types/content'

export const chapters: Chapter[] = [
  {
    id: 'linear-algebra',
    title: 'Linear Algebra',
    slug: 'linear-algebra',
    description: 'Vectors, matrices, and linear transformations. The mathematical foundation that underlies most machine learning algorithms.',
    icon: '📐',
    order: 1,
    readingTime: 45,
    difficulty: 'Beginner',
    prerequisites: ['Basic algebra', 'High school mathematics'],
    learningObjectives: [
      'Understand vector spaces and operations',
      'Master matrix multiplication and properties',
      'Learn eigenvalues and eigenvectors',
      'Apply linear transformations to data'
    ],
    sections: [
      {
        id: 'vectors',
        title: 'Vectors and Vector Spaces',
        slug: 'vectors',
        order: 1,
        estimatedTime: 15,
        subsections: [
          { id: 'vector-basics', title: 'Vector Basics', slug: 'vector-basics', order: 1 },
          { id: 'vector-operations', title: 'Vector Operations', slug: 'vector-operations', order: 2 },
          { id: 'vector-spaces', title: 'Vector Spaces', slug: 'vector-spaces', order: 3 }
        ]
      },
      {
        id: 'matrices',
        title: 'Matrix Operations',
        slug: 'matrices',
        order: 2,
        estimatedTime: 20,
        subsections: [
          { id: 'matrix-basics', title: 'Matrix Fundamentals', slug: 'matrix-basics', order: 1 },
          { id: 'matrix-multiplication', title: 'Matrix Multiplication', slug: 'matrix-multiplication', order: 2 },
          { id: 'matrix-inverse', title: 'Matrix Inverse', slug: 'matrix-inverse', order: 3 }
        ]
      },
      {
        id: 'eigenvalues',
        title: 'Eigenvalues and Eigenvectors',
        slug: 'eigenvalues',
        order: 3,
        estimatedTime: 10
      }
    ],
    published: true
  },
  {
    id: 'matrices',
    title: 'Advanced Matrix Theory',
    slug: 'matrices',
    description: 'Deep dive into matrix operations, decompositions, and their applications in machine learning algorithms.',
    icon: '🔢',
    order: 2,
    readingTime: 40,
    difficulty: 'Intermediate',
    prerequisites: ['Linear Algebra basics', 'Vector operations'],
    learningObjectives: [
      'Master advanced matrix operations',
      'Understand matrix decompositions (SVD, LU, QR)',
      'Apply matrix techniques to dimensionality reduction',
      'Solve systems of linear equations'
    ],
    sections: [
      {
        id: 'matrix-decomposition',
        title: 'Matrix Decomposition',
        slug: 'matrix-decomposition',
        order: 1,
        estimatedTime: 20,
        subsections: [
          { id: 'svd', title: 'Singular Value Decomposition', slug: 'svd', order: 1 },
          { id: 'lu-decomposition', title: 'LU Decomposition', slug: 'lu-decomposition', order: 2 },
          { id: 'qr-decomposition', title: 'QR Decomposition', slug: 'qr-decomposition', order: 3 }
        ]
      },
      {
        id: 'matrix-applications',
        title: 'Applications in ML',
        slug: 'matrix-applications',
        order: 2,
        estimatedTime: 20,
        subsections: [
          { id: 'pca', title: 'Principal Component Analysis', slug: 'pca', order: 1 },
          { id: 'linear-regression', title: 'Linear Regression', slug: 'linear-regression', order: 2 }
        ]
      }
    ],
    published: true
  },
  {
    id: 'probability',
    title: 'Probability Theory',
    slug: 'probability',
    description: 'Fundamental concepts of probability, random variables, and distributions essential for machine learning.',
    icon: '🎲',
    order: 3,
    readingTime: 50,
    difficulty: 'Beginner',
    prerequisites: ['Basic calculus', 'Set theory'],
    learningObjectives: [
      'Understand probability fundamentals',
      'Work with random variables and distributions',
      'Apply Bayes\' theorem',
      'Model uncertainty in machine learning'
    ],
    sections: [
      {
        id: 'probability-basics',
        title: 'Probability Fundamentals',
        slug: 'probability-basics',
        order: 1,
        estimatedTime: 15,
        subsections: [
          { id: 'sample-spaces', title: 'Sample Spaces and Events', slug: 'sample-spaces', order: 1 },
          { id: 'probability-rules', title: 'Probability Rules', slug: 'probability-rules', order: 2 }
        ]
      },
      {
        id: 'distributions',
        title: 'Probability Distributions',
        slug: 'distributions',
        order: 2,
        estimatedTime: 25,
        subsections: [
          { id: 'discrete-distributions', title: 'Discrete Distributions', slug: 'discrete-distributions', order: 1 },
          { id: 'continuous-distributions', title: 'Continuous Distributions', slug: 'continuous-distributions', order: 2 },
          { id: 'normal-distribution', title: 'Normal Distribution', slug: 'normal-distribution', order: 3 }
        ]
      },
      {
        id: 'bayes-theorem',
        title: 'Bayes\' Theorem',
        slug: 'bayes-theorem',
        order: 3,
        estimatedTime: 10
      }
    ],
    published: true
  },
  {
    id: 'statistics',
    title: 'Statistics for ML',
    slug: 'statistics',
    description: 'Statistical methods, hypothesis testing, and inference techniques used in machine learning.',
    icon: '📊',
    order: 4,
    readingTime: 35,
    difficulty: 'Intermediate',
    prerequisites: ['Probability theory', 'Basic calculus'],
    learningObjectives: [
      'Perform statistical inference',
      'Understand hypothesis testing',
      'Apply statistical methods to data',
      'Evaluate model performance statistically'
    ],
    sections: [
      {
        id: 'descriptive-stats',
        title: 'Descriptive Statistics',
        slug: 'descriptive-stats',
        order: 1,
        estimatedTime: 10
      },
      {
        id: 'inferential-stats',
        title: 'Statistical Inference',
        slug: 'inferential-stats',
        order: 2,
        estimatedTime: 15,
        subsections: [
          { id: 'confidence-intervals', title: 'Confidence Intervals', slug: 'confidence-intervals', order: 1 },
          { id: 'hypothesis-testing', title: 'Hypothesis Testing', slug: 'hypothesis-testing', order: 2 }
        ]
      },
      {
        id: 'regression-analysis',
        title: 'Regression Analysis',
        slug: 'regression-analysis',
        order: 3,
        estimatedTime: 10
      }
    ],
    published: true
  },
  {
    id: 'optimization',
    title: 'Optimization Theory',
    slug: 'optimization',
    description: 'Mathematical optimization techniques including gradient descent and algorithms used to train machine learning models.',
    icon: '📈',
    order: 5,
    readingTime: 55,
    difficulty: 'Advanced',
    prerequisites: ['Calculus', 'Linear algebra', 'Vector operations'],
    learningObjectives: [
      'Understand optimization fundamentals',
      'Master gradient descent algorithms',
      'Apply constrained optimization',
      'Optimize machine learning models'
    ],
    sections: [
      {
        id: 'optimization-basics',
        title: 'Optimization Fundamentals',
        slug: 'optimization-basics',
        order: 1,
        estimatedTime: 15,
        subsections: [
          { id: 'objective-functions', title: 'Objective Functions', slug: 'objective-functions', order: 1 },
          { id: 'convex-optimization', title: 'Convex Optimization', slug: 'convex-optimization', order: 2 }
        ]
      },
      {
        id: 'gradient-descent',
        title: 'Gradient Descent',
        slug: 'gradient-descent',
        order: 2,
        estimatedTime: 25,
        subsections: [
          { id: 'basic-gradient-descent', title: 'Basic Gradient Descent', slug: 'basic-gradient-descent', order: 1 },
          { id: 'stochastic-gd', title: 'Stochastic Gradient Descent', slug: 'stochastic-gd', order: 2 },
          { id: 'advanced-optimizers', title: 'Advanced Optimizers', slug: 'advanced-optimizers', order: 3 }
        ]
      },
      {
        id: 'constrained-optimization',
        title: 'Constrained Optimization',
        slug: 'constrained-optimization',
        order: 3,
        estimatedTime: 15,
        subsections: [
          { id: 'lagrange-multipliers', title: 'Lagrange Multipliers', slug: 'lagrange-multipliers', order: 1 },
          { id: 'kkt-conditions', title: 'KKT Conditions', slug: 'kkt-conditions', order: 2 }
        ]
      }
    ],
    published: true
  }
]

export const getChapterBySlug = (slug: string): Chapter | undefined => {
  return chapters.find(chapter => chapter.slug === slug)
}

export const getChapterById = (id: string): Chapter | undefined => {
  return chapters.find(chapter => chapter.id === id)
}

export const getPublishedChapters = (): Chapter[] => {
  return chapters.filter(chapter => chapter.published).sort((a, b) => a.order - b.order)
}
</file>

<file path="lib/hooks/useTheme.ts">
// Re-export the useTheme hook from ThemeProvider for convenience
export { useTheme } from '@/components/providers/ThemeProvider'

// Type definitions for theme system
export type Theme = 'light' | 'dark'

export interface ThemeContextValue {
  theme: Theme
  toggleTheme: () => void
}

export interface ThemeProviderProps {
  children: React.ReactNode
}
</file>

<file path="lib/utils/cn.ts">
import { type ClassValue, clsx } from 'clsx'

export function cn(...inputs: ClassValue[]) {
  return clsx(inputs)
}
</file>

<file path="lib/utils/navigation.ts">
import { Chapter, ChapterNavigation, TableOfContentsItem } from '@/types/content'
import { chapters, getChapterBySlug } from '@/lib/data/chapters'

/**
 * Get navigation information for a chapter (previous and next chapters)
 */
export function getChapterNavigation(currentSlug: string): ChapterNavigation | null {
  const publishedChapters = chapters
    .filter(chapter => chapter.published)
    .sort((a, b) => a.order - b.order)
  
  const currentIndex = publishedChapters.findIndex(chapter => chapter.slug === currentSlug)
  
  if (currentIndex === -1) {
    return null
  }
  
  const current = publishedChapters[currentIndex]
  const previous = currentIndex > 0 ? publishedChapters[currentIndex - 1] : undefined
  const next = currentIndex < publishedChapters.length - 1 ? publishedChapters[currentIndex + 1] : undefined
  
  return {
    current,
    previous,
    next
  }
}

/**
 * Get the next chapter in the sequence
 */
export function getNextChapter(currentSlug: string): Chapter | null {
  const navigation = getChapterNavigation(currentSlug)
  return navigation?.next || null
}

/**
 * Get the previous chapter in the sequence
 */
export function getPreviousChapter(currentSlug: string): Chapter | null {
  const navigation = getChapterNavigation(currentSlug)
  return navigation?.previous || null
}

/**
 * Generate breadcrumb navigation for a chapter
 */
export function generateBreadcrumbs(chapterSlug: string, sectionSlug?: string): Array<{title: string, href: string}> {
  const breadcrumbs = [
    { title: 'Home', href: '/' }
  ]
  
  const chapter = getChapterBySlug(chapterSlug)
  if (!chapter) return breadcrumbs
  
  breadcrumbs.push({
    title: chapter.title,
    href: `/${chapter.slug}`
  })
  
  if (sectionSlug) {
    const section = chapter.sections.find(s => s.slug === sectionSlug)
    if (section) {
      breadcrumbs.push({
        title: section.title,
        href: `/${chapter.slug}#${section.slug}`
      })
    }
  }
  
  return breadcrumbs
}

/**
 * Generate table of contents for a chapter
 */
export function generateTableOfContents(chapter: Chapter): TableOfContentsItem[] {
  return chapter.sections.map(section => ({
    id: section.id,
    title: section.title,
    slug: section.slug,
    level: 1,
    children: section.subsections?.map(subsection => ({
      id: subsection.id,
      title: subsection.title,
      slug: subsection.slug,
      level: 2
    }))
  }))
}

/**
 * Calculate total reading time for a chapter
 */
export function calculateChapterReadingTime(chapter: Chapter): number {
  return chapter.sections.reduce((total, section) => {
    const sectionTime = section.estimatedTime || 0
    const subsectionTime = section.subsections?.reduce((subTotal, subsection) => {
      return subTotal + (subsection.estimatedTime || 0)
    }, 0) || 0
    
    return total + sectionTime + subsectionTime
  }, 0)
}

/**
 * Get chapter progress percentage
 */
export function getChapterProgress(chapterSlug: string, completedSections: string[] = []): number {
  const chapter = getChapterBySlug(chapterSlug)
  if (!chapter) return 0
  
  const totalSections = chapter.sections.length
  const completedCount = chapter.sections.filter(section => 
    completedSections.includes(section.id)
  ).length
  
  return totalSections > 0 ? Math.round((completedCount / totalSections) * 100) : 0
}

/**
 * Get all chapter URLs for sitemap generation
 */
export function getAllChapterUrls(): string[] {
  return chapters
    .filter(chapter => chapter.published)
    .map(chapter => `/${chapter.slug}`)
}

/**
 * Check if a chapter exists and is published
 */
export function isValidChapterSlug(slug: string): boolean {
  const chapter = getChapterBySlug(slug)
  return chapter ? chapter.published : false
}

/**
 * Get chapter difficulty color class
 */
export function getDifficultyColor(difficulty: string): string {
  switch (difficulty.toLowerCase()) {
    case 'beginner':
      return 'text-green-600 bg-green-50 border-green-200'
    case 'intermediate':
      return 'text-yellow-600 bg-yellow-50 border-yellow-200'
    case 'advanced':
      return 'text-red-600 bg-red-50 border-red-200'
    default:
      return 'text-gray-600 bg-gray-50 border-gray-200'
  }
}

/**
 * Format reading time for display
 */
export function formatReadingTime(minutes: number): string {
  if (minutes < 60) {
    return `${minutes} min read`
  }
  
  const hours = Math.floor(minutes / 60)
  const remainingMinutes = minutes % 60
  
  if (remainingMinutes === 0) {
    return `${hours} hr read`
  }
  
  return `${hours}h ${remainingMinutes}m read`
}
</file>

<file path="lib/utils/typography.ts">
import React from 'react'
import { cn } from './cn'

// Typography utility functions for consistent text styling

interface TypographyProps {
  className?: string
  children: React.ReactNode
}

// Heading components with proper hierarchy
export function H1({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('h1', {
    className: cn(
      'text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight text-foreground mb-6',
      'leading-tight',
      className
    )
  }, children)
}

export function H2({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('h2', {
    className: cn(
      'text-2xl sm:text-3xl lg:text-4xl font-semibold tracking-tight text-foreground mb-4',
      'leading-tight mt-12 first:mt-0',
      className
    )
  }, children)
}

export function H3({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('h3', {
    className: cn(
      'text-xl sm:text-2xl lg:text-3xl font-semibold text-foreground mb-3',
      'leading-snug mt-8 first:mt-0',
      className
    )
  }, children)
}

export function H4({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('h4', {
    className: cn(
      'text-lg sm:text-xl font-semibold text-foreground mb-2',
      'leading-snug mt-6 first:mt-0',
      className
    )
  }, children)
}

export function H5({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('h5', {
    className: cn(
      'text-base sm:text-lg font-medium text-foreground mb-2',
      'leading-normal mt-4 first:mt-0',
      className
    )
  }, children)
}

export function H6({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('h6', {
    className: cn(
      'text-sm sm:text-base font-medium text-foreground mb-1',
      'leading-normal mt-4 first:mt-0',
      className
    )
  }, children)
}

// Paragraph and text components
export function P({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('p', {
    className: cn(
      'text-base sm:text-lg text-foreground leading-relaxed mb-4',
      'max-w-none',
      className
    )
  }, children)
}

export function Lead({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('p', {
    className: cn(
      'text-lg sm:text-xl text-muted-foreground leading-relaxed mb-6',
      'font-light',
      className
    )
  }, children)
}

export function Small({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('small', {
    className: cn(
      'text-sm text-muted-foreground leading-normal',
      className
    )
  }, children)
}

export function Muted({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('p', {
    className: cn(
      'text-sm text-muted-foreground leading-normal',
      className
    )
  }, children)
}

// Mathematical content specific typography
export function MathBlock({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('div', {
    className: cn(
      'my-6 p-4 bg-muted rounded-lg overflow-x-auto',
      'text-center font-mono text-foreground',
      'border border-border',
      className
    )
  }, children)
}

export function InlineMath({ className, children }: TypographyProps): React.ReactElement {
  return React.createElement('span', {
    className: cn(
      'font-mono bg-muted px-1 py-0.5 rounded text-foreground',
      'text-sm',
      className
    )
  }, children)
}

// Utility classes as CSS-in-JS
export const typographyClasses = {
  // Headings
  h1: 'text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight text-foreground mb-6 leading-tight',
  h2: 'text-2xl sm:text-3xl lg:text-4xl font-semibold tracking-tight text-foreground mb-4 leading-tight mt-12 first:mt-0',
  h3: 'text-xl sm:text-2xl lg:text-3xl font-semibold text-foreground mb-3 leading-snug mt-8 first:mt-0',
  h4: 'text-lg sm:text-xl font-semibold text-foreground mb-2 leading-snug mt-6 first:mt-0',
  h5: 'text-base sm:text-lg font-medium text-foreground mb-2 leading-normal mt-4 first:mt-0',
  h6: 'text-sm sm:text-base font-medium text-foreground mb-1 leading-normal mt-4 first:mt-0',
  
  // Body text
  p: 'text-base sm:text-lg text-foreground leading-relaxed mb-4 max-w-none',
  lead: 'text-lg sm:text-xl text-muted-foreground leading-relaxed mb-6 font-light',
  small: 'text-sm text-muted-foreground leading-normal',
  muted: 'text-sm text-muted-foreground leading-normal',
  
  // Mathematical content
  mathBlock: 'my-6 p-4 bg-muted rounded-lg overflow-x-auto text-center font-mono text-foreground border border-border',
  inlineMath: 'font-mono bg-muted px-1 py-0.5 rounded text-foreground text-sm'
}
</file>

<file path="LICENSE">
MIT License

Copyright (c) 2025 Pramod Goyal

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="next-env.d.ts">
/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/building-your-application/configuring/typescript for more information.
</file>

<file path="postcss.config.js">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "lib": ["dom", "dom.iterable", "es6"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"],
      "@/components/*": ["components/*"],
      "@/lib/*": ["lib/*"],
      "@/types/*": ["types/*"],
      "@/styles/*": ["styles/*"]
    },
    "target": "ES2017",
    "forceConsistentCasingInFileNames": true,
    "noUncheckedIndexedAccess": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
</file>

<file path="types/content.ts">
export interface Chapter {
  id: string
  title: string
  slug: string
  description: string
  icon: string
  order: number
  readingTime: number // in minutes
  difficulty: 'Beginner' | 'Intermediate' | 'Advanced'
  prerequisites: string[]
  learningObjectives: string[]
  sections: Section[]
  published: boolean
}

export interface Section {
  id: string
  title: string
  slug: string
  order: number
  subsections?: Subsection[]
  estimatedTime?: number // in minutes
}

export interface Subsection {
  id: string
  title: string
  slug: string
  order: number
  estimatedTime?: number // in minutes
}

export interface ChapterNavigation {
  current: Chapter
  previous?: Chapter
  next?: Chapter
}

export interface TableOfContentsItem {
  id: string
  title: string
  slug: string
  level: number // 1 for sections, 2 for subsections
  isActive?: boolean
  children?: TableOfContentsItem[]
}

export interface ChapterMetadata {
  title: string
  description: string
  keywords: string[]
  estimatedReadingTime: number
  lastUpdated: string
  difficulty: string
  prerequisites: string[]
}

export interface BookProgress {
  chaptersCompleted: string[]
  currentChapter?: string
  totalProgress: number // percentage
  lastAccessed: string
}
</file>

<file path="types/theme.ts">
export type Theme = 'light' | 'dark'

export interface ThemeContextValue {
  theme: Theme
  toggleTheme: () => void
}

export interface ThemeProviderProps {
  children: React.ReactNode
}

export interface ThemeToggleProps {
  className?: string
}
</file>

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# Snowpack dependency directory (https://snowpack.dev/)
web_modules/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variable files
.env
.env.*
!.env.example

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and not Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp
.cache

# Sveltekit cache directory
.svelte-kit/

# vitepress build output
**/.vitepress/dist

# vitepress cache directory
**/.vitepress/cache

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# Firebase cache directory
.firebase/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v3
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/sdks
!.yarn/versions

# Vite logs files
vite.config.js.timestamp-*
vite.config.ts.timestamp-*

package-lock.json
</file>

<file path="app/layout.tsx">
import type { Metadata } from 'next'
import { ClientLayout } from '@/components/layout/ClientLayout'
import './globals.css'

export const metadata: Metadata = {
  title: 'Interactive ML Mathematics',
  description: 'An interactive web book for mathematics in machine learning',
  keywords: ['mathematics', 'machine learning', 'linear algebra', 'calculus', 'statistics'],
  authors: [{ name: 'Your Name' }],
  robots: 'index, follow',
  openGraph: {
    title: 'Interactive ML Mathematics',
    description: 'An interactive web book for mathematics in machine learning',
    type: 'website',
    locale: 'en_US'
  },
  twitter: {
    card: 'summary_large_image',
    title: 'Interactive ML Mathematics',
    description: 'An interactive web book for mathematics in machine learning'
  }
}

export const viewport = {
  width: 'device-width',
  initialScale: 1
}

interface RootLayoutProps {
  children: React.ReactNode
}

export default function RootLayout({ children }: RootLayoutProps) {
  return (
    <html lang="en" suppressHydrationWarning>
      <head />
      <body className="min-h-screen antialiased">
        <ClientLayout>
          {children}
        </ClientLayout>
      </body>
    </html>
  )
}
</file>

<file path="components/layout/ClientLayout.tsx">
'use client'

import { ThemeProvider } from '@/components/providers/ThemeProvider'
import { Layout } from '@/components/layout/Layout'

interface ClientLayoutProps {
  children: React.ReactNode
}

export function ClientLayout({ children }: ClientLayoutProps) {
  return (
    <ThemeProvider>
      <Layout>
        {children}
      </Layout>
    </ThemeProvider>
  )
}
</file>

<file path="components/ui/ThemeToggle.tsx">
'use client'

import { useTheme } from '@/components/providers/ThemeProvider'
import { useState, useEffect } from 'react'

export function ThemeToggle() {
  const [mounted, setMounted] = useState(false)
  
  useEffect(() => {
    setMounted(true)
  }, [])
  
  // Don't render until mounted on client
  if (!mounted) {
    return (
      <button
        className="p-2 rounded-lg border border-gray-300 bg-white hover:bg-gray-100 transition-colors"
        disabled
        aria-label="Loading theme toggle"
        type="button"
      >
        <div className="h-5 w-5 animate-pulse bg-gray-300 rounded" />
      </button>
    )
  }
  
  return <MountedThemeToggle />
}

function MountedThemeToggle() {
  const { theme, toggleTheme } = useTheme()
  
  return (
    <button
      onClick={toggleTheme}
      className="p-2 rounded-lg border border-border bg-background hover:bg-accent transition-colors focus:outline-none focus:ring-2 focus:ring-foreground focus:ring-offset-2 focus:ring-offset-background"
      aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} mode`}
      type="button"
    >
      {theme === 'light' ? (
        <MoonIcon className="h-5 w-5" />
      ) : (
        <SunIcon className="h-5 w-5" />
      )}
    </button>
  )
}

function SunIcon({ className }: { className?: string }) {
  return (
    <svg
      className={className}
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
    >
      <circle cx="12" cy="12" r="5" />
      <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
    </svg>
  )
}

function MoonIcon({ className }: { className?: string }) {
  return (
    <svg
      className={className}
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
    </svg>
  )
}
</file>

<file path="next.config.js">
import createMDX from '@next/mdx'
import remarkGfm from 'remark-gfm'
import remarkFrontmatter from 'remark-frontmatter'
import remarkMdxFrontmatter from 'remark-mdx-frontmatter'
import rehypeSlug from 'rehype-slug'
import rehypeAutolinkHeadings from 'rehype-autolink-headings'

/** @type {import('next').NextConfig} */
const nextConfig = {
  // Enable static export capability for hosting flexibility
  output: 'export',
  
  // Configure pageExtensions to include MDX files
  pageExtensions: ['js', 'jsx', 'md', 'mdx', 'ts', 'tsx'],
  
  // Disable image optimization for static export
  images: {
    unoptimized: true
  },
  
  // Enable strict mode for better development experience
  reactStrictMode: true,
  
  // Optimize for modern browsers
  swcMinify: true,
  
  // Configure trailing slash behavior
  trailingSlash: false,
  
  // Disable x-powered-by header
  poweredByHeader: false
}

const withMDX = createMDX({
  // Add markdown plugins here
  options: {
    remarkPlugins: [
      remarkGfm,
      remarkFrontmatter,
      [remarkMdxFrontmatter, { name: 'frontmatter' }]
    ],
    rehypePlugins: [
      rehypeSlug,
      [rehypeAutolinkHeadings, {
        behavior: 'wrap',
        properties: {
          className: ['anchor-link']
        }
      }]
    ],
  },
})

// Merge MDX config with Next.js config
export default withMDX(nextConfig)
</file>

<file path="package.json">
{
  "name": "ml-math-book",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    "@mdx-js/loader": "^3.1.0",
    "@mdx-js/react": "^3.1.0",
    "@next/mdx": "^14.2.31",
    "@types/mdx": "^2.0.13",
    "clsx": "^2.1.1",
    "next": "^14.2.0",
    "react": "^18.3.0",
    "react-dom": "^18.3.0",
    "rehype-autolink-headings": "^7.1.0",
    "rehype-slug": "^6.0.0",
    "remark-frontmatter": "^5.0.0",
    "remark-gfm": "^4.0.1",
    "remark-mdx-frontmatter": "^5.2.0"
  },
  "devDependencies": {
    "@types/node": "^20.14.0",
    "@types/react": "^18.3.0",
    "@types/react-dom": "^18.3.0",
    "autoprefixer": "^10.4.19",
    "eslint": "^8.57.0",
    "eslint-config-next": "^14.2.0",
    "postcss": "^8.4.38",
    "tailwindcss": "^3.4.4",
    "typescript": "^5.4.0"
  }
}
</file>

<file path="README.md">
# Interactive ML Mathematics Web Book

An interactive web book focused on mathematics for machine learning, featuring dynamic visualizations and engaging educational content.

## 🚀 Getting Started

### Prerequisites
- Node.js 18+ 
- npm, yarn, or pnpm

### Installation

1. Clone the repository and install dependencies:
```bash
npm install
# or
yarn install
# or
pnpm install
```

2. Run the development server:
```bash
npm run dev
# or
yarn dev
# or
pnpm dev
```

3. Open [http://localhost:3000](http://localhost:3000) in your browser.

### Build for Production

```bash
npm run build
# or
yarn build
# or
pnpm build
```

This creates an optimized static export in the `out/` directory.

## 📁 Project Structure

```
ml-math-book/
├── app/                 # Next.js App Router pages
│   ├── globals.css     # Global styles and CSS variables
│   ├── layout.tsx      # Root layout component
│   ├── page.tsx        # Home page
│   └── not-found.tsx   # 404 page
├── components/         # Reusable React components
│   └── ui/            # UI component library
├── lib/               # Utility functions and helpers
├── public/            # Static assets
├── styles/            # Additional stylesheets
└── types/             # TypeScript type definitions
```

## 🛠 Technology Stack

- **Framework**: Next.js 14+ with App Router
- **Language**: TypeScript with strict mode
- **Styling**: Tailwind CSS with custom theme
- **Deployment**: Static export ready

## 🎨 Theme System

The project uses CSS custom properties for theme variables:
- Light/dark mode support
- Optimized for mathematical content
- Clean black and white design aesthetic

## 📝 Development Scripts

- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm run start` - Start production server
- `npm run lint` - Run ESLint
- `npm run type-check` - Run TypeScript compiler check

## 🎯 Next Steps

This is the foundation setup. The next phase will add:
- Theme toggle system
- MDX integration for content
- Mathematical visualization components
- Interactive exercises
- Chapter navigation system

## 📚 Features (Planned)

- Interactive 3D mathematical visualizations
- Real-time equation rendering with MathJax
- Responsive design optimized for reading
- Progress tracking and exercises
- Smooth scrolling navigation

## 🤝 Contributing

This project serves as both an educational resource and a learning project for modern web development techniques.

## 📄 License

This project is for educational purposes.
</file>

<file path="tailwind.config.ts">
import type { Config } from 'tailwindcss'

const config: Config = {
  content: [
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './content/**/*.{js,ts,jsx,tsx,mdx}',
    './mdx-components.tsx',
  ],
  darkMode: 'class',
  theme: {
    extend: {
      // Typography optimized for mathematical content
      fontFamily: {
        sans: [
          'system-ui',
          '-apple-system',
          'BlinkMacSystemFont',
          'Segoe UI',
          'Roboto',
          'Oxygen',
          'Ubuntu',
          'Cantarell',
          'sans-serif'
        ],
        mono: [
          'SF Mono',
          'Monaco',
          'Inconsolata',
          'Roboto Mono',
          'monospace'
        ]
      },
      
      // Custom colors using CSS custom properties with opacity support
      colors: {
        // Base colors using CSS custom properties
        background: 'rgb(var(--background) / <alpha-value>)',
        foreground: 'rgb(var(--foreground) / <alpha-value>)',
        muted: {
          DEFAULT: 'rgb(var(--muted) / <alpha-value>)',
          foreground: 'rgb(var(--muted-foreground) / <alpha-value>)',
        },
        border: 'rgb(var(--border) / <alpha-value>)',
        accent: {
          DEFAULT: 'rgb(var(--accent) / <alpha-value>)',
          foreground: 'rgb(var(--accent-foreground) / <alpha-value>)',
        },
        
        // Override default colors to black/white only
        white: '#ffffff',
        black: '#000000',
        transparent: 'transparent',
        current: 'currentColor',
      },
      
      // Improved spacing for mathematical content
      spacing: {
        '18': '4.5rem',
        '88': '22rem'
      },
      
      // Animation utilities for smooth interactions
      animation: {
        'fade-in': 'fadeIn 0.5s ease-in-out',
        'slide-in': 'slideIn 0.3s ease-out'
      },
      
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' }
        },
        slideIn: {
          '0%': { transform: 'translateY(-10px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' }
        }
      },
      
      // Typography enhancements
      typography: {
        DEFAULT: {
          css: {
            maxWidth: 'none',
            lineHeight: '1.7',
            fontSize: '1.1rem'
          }
        }
      }
    }
  },
  plugins: []
}

export default config
</file>

<file path="app/globals.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Light theme variables - using RGB values for opacity support */
  --background: 255 255 255;
  --foreground: 0 0 0;
  --muted: 248 248 248;
  --muted-foreground: 102 102 102;
  --border: 225 225 225;
  --accent: 240 240 240;
  --accent-foreground: 0 0 0;
}

.dark {
  /* Dark theme variables - using RGB values for opacity support */
  --background: 0 0 0;
  --foreground: 255 255 255;
  --muted: 10 10 10;
  --muted-foreground: 161 161 161;
  --border: 38 38 38;
  --accent: 26 26 26;
  --accent-foreground: 255 255 255;
}

/* Base styles for mathematical content */
@layer base {
  * {
    @apply border-border;
  }
  
  html {
    scroll-behavior: smooth;
    font-size: 16px; /* Base font size for rem calculations */
  }
  
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: none; /* Disable theme transition animations */
    line-height: 1.6; /* Improved default line height */
  }
  
  /* Typography improvements for readability */
  h1, h2, h3, h4, h5, h6 {
    @apply font-medium text-foreground;
    line-height: 1.2;
    letter-spacing: -0.025em;
    text-wrap: balance; /* Better text wrapping for headings */
  }
  
  h1 {
    @apply text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight mb-6;
    line-height: 1.1;
  }
  
  h2 {
    @apply text-2xl sm:text-3xl lg:text-4xl font-semibold tracking-tight mb-4 mt-12 first:mt-0;
    line-height: 1.2;
  }
  
  h3 {
    @apply text-xl sm:text-2xl lg:text-3xl font-semibold mb-3 mt-8 first:mt-0;
    line-height: 1.3;
  }
  
  h4 {
    @apply text-lg sm:text-xl font-semibold mb-2 mt-6 first:mt-0;
    line-height: 1.4;
  }
  
  h5 {
    @apply text-base sm:text-lg font-medium mb-2 mt-4 first:mt-0;
    line-height: 1.5;
  }
  
  h6 {
    @apply text-sm sm:text-base font-medium mb-1 mt-4 first:mt-0;
    line-height: 1.5;
  }
  
  p {
    @apply text-foreground mb-4;
    line-height: 1.7;
    font-size: 1rem;
    max-width: none;
  }
  
  /* Mathematical content styling */
  .math-content {
    @apply leading-relaxed text-foreground;
  }
  
  .math-display {
    @apply my-6 text-center overflow-x-auto;
  }
  
  .math-inline {
    @apply font-mono bg-muted px-1 py-0.5 rounded text-sm;
  }
  
  /* Lists */
  ul, ol {
    @apply mb-4 pl-6;
  }
  
  li {
    @apply mb-1;
    line-height: 1.6;
  }
  
  /* Links */
  a {
    @apply text-foreground underline underline-offset-4 decoration-muted-foreground hover:decoration-foreground transition-colors;
  }
  
  /* Code styling */
  code {
    @apply font-mono text-sm bg-muted text-foreground px-1 py-0.5 rounded;
    font-size: 0.875em;
  }
  
  pre {
    @apply font-mono text-sm overflow-x-auto bg-muted text-foreground p-4 rounded-lg border border-border my-4;
    font-size: 0.875rem;
  }
  
  pre code {
    @apply bg-transparent p-0;
  }
  
  /* Blockquotes */
  blockquote {
    @apply border-l-4 border-border pl-4 italic text-muted-foreground my-4;
  }
  
  /* Tables */
  table {
    @apply w-full border-collapse border border-border my-4;
  }
  
  th, td {
    @apply border border-border px-4 py-2 text-left;
  }
  
  th {
    @apply bg-muted font-semibold;
  }
  
  /* Selection styling */
  ::selection {
    @apply bg-foreground text-background;
  }
  
  /* Focus ring styling */
  :focus-visible {
    @apply outline-none ring-2 ring-foreground ring-offset-2 ring-offset-background;
  }
  
  /* Responsive images */
  img {
    @apply max-w-full h-auto;
  }
  
  /* Horizontal rule */
  hr {
    @apply border-0 border-t border-border my-8;
  }
}

/* MDX-specific styles */
@layer components {
  .mdx-content {
    @apply text-foreground leading-relaxed;
  }
  
  .mdx-content h1,
  .mdx-content h2,
  .mdx-content h3,
  .mdx-content h4,
  .mdx-content h5,
  .mdx-content h6 {
    @apply scroll-mt-16; /* Account for fixed header when jumping to anchors */
  }
  
  /* Anchor links for headings */
  .anchor-link {
    @apply no-underline;
  }
  
  .anchor-link:hover {
    @apply underline;
  }
  
  /* Enhanced code blocks for mathematical content */
  .mdx-content pre {
    @apply relative;
    font-variant-ligatures: none; /* Disable ligatures in code blocks */
  }
  
  .mdx-content pre:hover {
    @apply bg-accent transition-colors duration-200;
  }
  
  /* Mathematical notation improvements */
  .mdx-content .math-block {
    @apply font-mono text-center bg-muted border border-border rounded-lg p-4 my-6 overflow-x-auto;
    font-variant-numeric: tabular-nums;
  }
  
  .mdx-content .math-inline {
    @apply font-mono bg-muted px-1 py-0.5 rounded text-sm;
    font-variant-numeric: tabular-nums;
  }
  
  /* Improved list styling */
  .mdx-content ul {
    @apply list-disc pl-6 mb-4 space-y-1;
  }
  
  .mdx-content ol {
    @apply list-decimal pl-6 mb-4 space-y-1;
  }
  
  .mdx-content li {
    @apply leading-relaxed;
  }
  
  /* Enhanced blockquotes */
  .mdx-content blockquote {
    @apply border-l-4 border-border pl-6 py-2 my-6 italic text-muted-foreground rounded-r-lg;
    background-color: rgb(var(--muted) / 0.3);
  }
  
  .mdx-content blockquote p {
    @apply mb-0;
  }
  
  /* Table improvements */
  .mdx-content table {
    @apply w-full border-collapse my-6 text-sm;
  }
  
  .mdx-content th {
    @apply bg-muted font-semibold text-left p-3 border border-border;
  }
  
  .mdx-content td {
    @apply p-3 border border-border;
  }
  
  .mdx-content tbody tr:nth-child(even) {
    background-color: rgb(var(--muted) / 0.3);
  }
  
  /* Image styling */
  .mdx-content img {
    @apply rounded-lg border border-border my-6 mx-auto;
  }
  
  /* Link styling */
  .mdx-content a {
    @apply text-foreground underline underline-offset-4 decoration-muted-foreground hover:decoration-foreground transition-colors;
  }
  
  .mdx-content a[href^="http"] {
    @apply after:content-['↗'] after:text-xs after:ml-1 after:text-muted-foreground;
  }
}

/* Utility classes */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  .fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }
  
  .slide-in {
    animation: slideIn 0.3s ease-out;
  }
  
  /* Mathematical content utilities */
  .math-notation {
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum" 1;
  }
  
  .code-block-container {
    @apply relative group;
  }
  
  .copy-button {
    @apply absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity;
  }
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideIn {
  from {
    transform: translateY(-10px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Print styles for mathematical content */
@media print {
  .mdx-content {
    @apply text-black bg-white;
  }
  
  .mdx-content .math-block,
  .mdx-content .math-inline {
    @apply bg-transparent border border-gray-300;
  }
  
  .mdx-content a {
    @apply text-black no-underline;
  }
  
  .mdx-content a[href]:after {
    content: " (" attr(href) ")";
    @apply text-xs text-gray-600;
  }
}
</file>

<file path="app/page.tsx">
'use client'

import { HomePageContent } from '@/components/content/HomePageContent'
import { getPublishedChapters } from '@/lib/data/chapters'
import { useState, useEffect } from 'react'

export default function HomePage() {
  const [mounted, setMounted] = useState(false)
  
  useEffect(() => {
    setMounted(true)
  }, [])
  
  if (!mounted) {
    return <div className="min-h-screen bg-background" />
  }
  
  const chapters = getPublishedChapters()
  
  return <HomePageContent chapters={chapters} />
}
</file>

</files>
